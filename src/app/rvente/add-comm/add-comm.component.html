<div style="padding: 2%;">
    <div class="col-lg-12">
        <div class="card card-primary card-outline shadow-lg p-3 mb-5 bg-white rounded">
            <div class="card-header">
                <h3 class="card-title"><i class="fas fa-file-alt mr-2"></i>Ajouter Commande</h3>
            </div>
            <div class="card-body">
                <form>
                    <div class="row gy-2 gx-3 align-items-center">
                        <div class="col-sm-4"> <label for="Fournisseur" style="font-size: small;color:lightslategrey">Client :</label>
                            <select class="form-control" [(ngModel)]="index_client" [ngModelOptions]="{standalone: true}" required>
                            <option *ngFor="let fo of f;let index = index" value="{{index}}">{{fo.name}}</option>
                        </select>
                        </div>
                        <div class="col-sm-4 "> </div>
                        <div class="col-sm-4 "> <label for="name" style="font-size: small;color:lightslategrey">Creé
                            Le :</label> <input type="date" style="font-size: small;" name="date_creation " class="form-control " [(ngModel)]="commcl.date_creation" [ngModelOptions]="{standalone: true}" required> </div>
                    </div>
                    <div class="row gy-2 gx-3 align-items-center">
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4 "> </div>
                        <div class="col-sm-4 "> <label for="oten" style="font-size: small;color:lightslategrey">Note
                            :</label> <input type="text" style="font-size: small;" name="note " class="form-control " [(ngModel)]="commcl.note" [ngModelOptions]="{standalone: true}" required> </div>
                    </div>
                    <div class="row gy-2 gx-3 align-items-center ">
                        <div class="col-sm-4 "> </div>
                        <div class="col-sm-4 "> </div>
                        <div class="col-sm-4 "> <label for="name" style="font-size: small;color:lightslategrey">Délai de Livraison :</label> <input type="date" style="font-size: small;" name="date_echeance " class="form-control " [(ngModel)]="commcl.date_echeance" [ngModelOptions]="{standalone: true}"
                                required>
                        </div>
                    </div>
                    <hr class="my-4 ">
                    <div class="row gy-2 gx-3 align-items-center ">
                        <!-- <div class="col-sm-2 "> <label for="produit"
                            style="font-size: small;color:lightslategrey">Produit :</label> <select
                            class="form-control" (change)="getSelecteItem($event)"
                            [(ngModel)]="facture.id_product" [ngModelOptions]="{standalone: true}" required>
                            <option *ngFor="let p of products" value={{p.id}}>{{p.Libelle}}</option>
                        </select> </div>
                    <div class="col-sm-4 "> <label for="quantite" style="font-size: small;color:lightslategrey">Quantité :</label> <input type="number" style="font-size: small;" name="quantite_entre " (change)="getq($event)" class="form-control " [(ngModel)]="facture.quantite_entre"
                            [ngModelOptions]="{standalone: true}" value="1" required>
                    </div>
                    <div class="col-sm-3 "> <label for="produit" style="font-size: small;color:lightslategrey">Montant TVA: </label>



                        <input type="" name="MONTANT_TVA" style="font-size: small;" class="form-control" [(ngModel)]="facture.Montant_TVA" [ngModelOptions]="{standalone: true}" required>



                        <div> <label for="produit" style="font-size: small;color:lightslategrey">Taxe Appliqqué:
                            </label>
                            <input type="" name="TAXA" style="font-size: small;" class="form-control" [(ngModel)]="facture.Taxe_Applique" [ngModelOptions]="{standalone: true}" required value="{{TAXA}}">
                        </div>
                    </div>
                    <div class="col-sm-3 "> <label for="produit" style="font-size: small;color:lightslategrey">Total HT: </label>
                        <input type="" name="Prix_HT" style="font-size: small;" class="form-control" [(ngModel)]="facture.Total_HT" value="{{TOT_HT}}" [ngModelOptions]="{standalone: true}" required>

                        <div> <label for="produit" style="font-size: small;color:lightslategrey">Total TTC:
                            </label>
                            <input type="" name="Prix_TTC" style="font-size: small;" class="form-control" [(ngModel)]="facture" value="{{TOT_TTC}}" [ngModelOptions]="{standalone: true}" required>
                        </div>
                    </div> -->
                        <div class="row gy-2 gx-3 align-items-center " *ngFor="let prod of listProduct">

                            <div class="col-sm-2 "> <label for="produit" style="font-size: small;color:lightslategrey">Produit :</label>
                                <select class="form-control" (change)="getSelecteItem(prod)" [(ngModel)]="prod.id_product" [ngModelOptions]="{standalone: true}" required>
                                <option *ngFor="let p of products" value={{p.id}}>{{p.name}}</option>
                            </select>
                            </div>
                            <div class="col-sm-4 "> <label for="quantite" style="font-size: small;color:lightslategrey">Quantité :</label> <input type="number" style="font-size: small;" name="quantite_entre " (change)="getq(prod)" class="form-control " [(ngModel)]="prod.quantite_entre"
                                    [ngModelOptions]="{standalone: true}" value="1" required>
                            </div>
                            <div class="col-sm-3 "> <label for="produit" style="font-size: small;color:lightslategrey">Montant TVA: </label>

                                <input type="" name="MONTANT_TVA" style="font-size: small;" class="form-control" [(ngModel)]="prod.Montant_TVA" [ngModelOptions]="{standalone: true}" required disabled>



                                <div> <label for="produit" style="font-size: small;color:lightslategrey">Taxe
                                    Appliqqué:
                                </label>
                                    <input type="" name="TAXA" style="font-size: small;" class="form-control" [(ngModel)]="prod.Taxe_Applique" [ngModelOptions]="{standalone: true}" required disabled>
                                </div>
                            </div>
                            <div class="col-sm-3 "> <label for="produit" style="font-size: small;color:lightslategrey">Total HT: </label>
                                <input type="" name="Prix_HT" style="font-size: small;" class="form-control" [(ngModel)]="prod.Total_HT" [ngModelOptions]="{standalone: true}" required disabled>

                                <div> <label for="produit" style="font-size: small;color:lightslategrey">Total TTC:
                                </label>
                                    <input type="" name="Prix_TTC" style="font-size: small;" class="form-control" [(ngModel)]="prod.Montant_TTC" [ngModelOptions]="{standalone: true}" required disabled>
                                </div>
                            </div>
                        </div>
                        <div class="  text-right col-sm-12 mt-3  ">
                            <button type="submit" style="font-size: small;" class="btn btn-success "><i
                                class=" nav-icon fas fa-plus " (click)="add()"></i>
                        </button>
                        </div>
                    </div>
                    <hr class="my-4 ">
                    <div class="row gy-2 gx-3 align-items-center ">
                        <div class="col-sm-4 "> <label for="produit" style="font-size: small;color:lightslategrey">Timbre fiscale :</label> <input type="number" style="font-size: small;" name="timbre fiscale " class="form-control " [(ngModel)]="commcl.Timbre_fiscale" [ngModelOptions]="{standalone: true}"
                                required> </div>
                        <div class="col-sm-4 "> </div>
                        <div class="col-sm-4 "> <label for="prix" style="font-size: small;">Total HT : {{commcl.Total_HT}} EUR</label>
                        </div>
                    </div>
                    <div class="row gy-2 gx-3 align-items-center ">
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> <label for="prix" style="font-size: small;">Total TVA : {{commcl.Montant_TVA}} EUR
                    </label>
                        </div>
                    </div>
                    <div class="row gy-2 gx-3 align-items-center ">
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> <label for="prix" style="font-size: small;">Total TTC :{{commcl.Montant_TTC}} EUR
                    </label>
                        </div>
                    </div>
                    <div class="row gy-2 gx-3 align-items-center ">
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> <label for="prix" style="font-size: small;">Timbre fiscale : {{commcl.Timbre_fiscale}} EUR</label>
                        </div>
                    </div>
                    <div class="row gy-2 gx-3 align-items-center ">
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> </div>
                        <div class="col-sm-4"> <label for="prix" style="font-size: small;">NET A PAYER : {{Net}} EUR</label>
                        </div>
                    </div>
                    <hr class="my-4">
                    <div class="row g-3"> </div>
                    <div class="col-sm-4"> <label for="Ref_Facture" style="font-size: small;color:lightslategrey">Réference Commande</label> <input type="text" name="Ref_Facture" class="form-control" [(ngModel)]="commcl.Ref_Facture" [ngModelOptions]="{standalone: true}" required></div>
                    <hr class="my-4">
                    <div class=" text-right"> <button type="button" style="font-size: small;" class="btn btn-danger mr-2" (click)="annuler()">Annuler</button> <button type="submit" style="font-size: small;" class="btn btn-primary " (click)="insertData()">Enregistrer</button> </div>
                </form>
            </div>
        </div>
    </div>